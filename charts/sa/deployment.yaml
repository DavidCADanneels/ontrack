apiVersion: apps/v1
kind: Deployment
metadata:
  name: ontrack-v2-deployment
  labels:
    app: "ontrack"
    major: "2"
spec:
  selector:
    matchLabels:
      app: "ontrack"
      major: "2"
  template:
    metadata:
      labels:
        app: "ontrack"
        major: "2"
    spec:
      containers:
        - name: ontrack
          image: "nemerosa/ontrack:2.33.5"
          ports:
            - containerPort: 8080
              name: http
              protocol: TCP
          livenessProbe:
            httpGet:
              port: http
              path: /info
          readinessProbe:
            httpGet:
              port: http
              path: /info
