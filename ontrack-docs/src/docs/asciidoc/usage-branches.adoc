[[branches]]
=== Managing branches

Several <<model,branches>> can be defined per <<projects,project>>.

==== Managing the branches in the project page

If you click on the _Show all branches_ button in the project page, you can
display all the branches, including the ones being disabled and the
<<templates,templates>>.

According to your authorizations, the following commands will be displayed as
icons just on the right of the branch name, following any other decoration:

* disabling the branch
* enabling the branch
* deleting the branch

image::images/project-page-branch-management.png[Branch commands,600]

This allows you to have a quick access to the management of the branches in a
project. Only the deletion of a branch will prompt you about your decision.

==== Branch templating

In a context where branches are numerous, because the workflow you're working
with implies the creation of many branches (feature branches, release branches,
...), each
of them associated with its own pipeline, creating the branches by hand, even
by cloning or copying them would be too much an effort.

Ontrack gives the possibility to create _branch templates_ and to
automatically create branches using this template according to a list of
branches. This list of branches
can either be static or provided by the SCM.

See <<templates>> for details about using this feature.

[[branches-stale]]
==== Managing stale branches

By default, Ontrack will keep all the branches of a project forever. This can
lead to a big number of branches to be displayed.

You can configure a project to _disable_ branches after a given number of
days has elapsed since the last build, and then to _delete_ them after an
additional number of days has elapsed again.

To configure this:

* go to the project page
* select the _Stale branches_ property and add it:

image::images/property-stale-selection.png[Stale property,400]

* set the number of days before disabling and the number of days before deleting

image::images/property-stale-dialog.png[Stale dialog,400]

If the _disabling_ days are set to 0, no branch will be ever disabled or
deleted.

If the _deleting_ days are set to 0, no branch will ever be deleted.

You can also set a list of <<model,promotion levels>> - a branch which is or has been promoted to such
a promotion level will not be eligible for being disabled or deleted.

In the sample above, the stale branches will be disabled after 60 days (not
shown any longer by default), and after again 300 days, they will be deleted
(so after 360 days in total). Branches which have at least one build being promoted to `PRODUCTION` will not
be deleted or disabled.s

Note that the _Stale branches_ property can also be set programmatically using
the <<dsl-projectproperties-stale,DSL>>.

[[branches-validation-stamp-filters]]
==== Validation stamp filters

When a branch defines many validation stamps, the view can become cluttered
and not really useful any longer, because displaying too much information.

_Validation stamp filters_ can be defined to restrict the view to a set
of known validation stamps.

Validation stamp filters can be selected in the branch view, just on the left
of the list of validation stamp headers.

A validation stamp filter is defined by:

* a name
* a list of validation stamp names to include

When a validation stamp filter is created for a branch, only the name
is required and all current validation stamps filters are included by default.

To edit a filter, the user can either:

* select it and _exclude_ displayed validation stamp filters by clicking
on the small cross close to the validation stamp icon
* edit the validation stamp filter directly. The edition dialog allows
the edition of the name and the selection / edition of the validation stamps
based on the current branch

Finally, the filters can be shared at project level and for all project for the
<<security,authorized users>>.

A filter shared at project level is shown with a `(P)` close to its name
and a global filter with a `(G)`.
