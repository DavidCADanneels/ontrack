<ot-view>

    <form ng-submit="submitSearch()">
        <table class="table table-hover table-condensed">
            <thead>
            <tr>
                <th>Branch</th>
                <th>Build</th>
                <th>Promotions</th>
                <th>Validations</th>
                <th>&nbsp;</th>
            </tr>
            </thead>
            <!-- Form -->
            <tbody>
            <tr>
                <td>
                    <input name="branchName" ng-model="data.branchName" class="form-control input-sm" type="text"
                           placeholder="Branch name"/>
                </td>
                <td>
                    <input name="buildName" ng-model="data.buildName" class="form-control input-sm" type="text"
                           placeholder="Build name"/>
                </td>
                <td>
                    <input name="promotionName" ng-model="data.promotionName" class="form-control input-sm" type="text"
                           placeholder="Promotion name"/>
                </td>
                <td>
                    <input name="validationStampName" ng-model="data.validationStampName" class="form-control input-sm"
                           type="text"
                           placeholder="Validation stamp name"/>
                </td>
                <td>
                    <button class="btn btn-sm btn-primary" type="submit">
                        <span class="fa fa-search"></span>
                        Search
                    </button>
                    <button class="btn btn-sm btn-link" type="button"
                            ng-class="{'text-muted': advancedSearch}"
                            ng-click="toggleAdvancedSearch()">
                        Advanced
                    </button>
                </td>
            </tr>
            <tr ng-show="advancedSearch">
                <td colspan="1">
                    Max. count
                    <input name="maximumCount" ng-model="data.maximumCount"
                           class="form-control input-sm"
                           type="number" min="1"
                           placeholder="Maximum count"/>
                </td>
                <td colspan="4">
                    &nbsp;
                </td>
            </tr>
            </tbody>
            <!-- Selected builds -->
            <tbody>
            <tr ng-repeat="buildView in selectedBuilds" class="ot-build-search-build ot-build-search-build-selected">
                <td class="ot-build-search-build-name">
                    <a href="#/branch/{{buildView.build.branch.id}}">{{buildView.build.branch.name}}</a>
                </td>
                <td class="ot-build-search-build-name">
                    <a href="#/build/{{buildView.build.id}}">{{buildView.build.name}}</a>
                </td>
                <td>
                    <ot-build-promotion-runs promotion-runs="buildView.promotionRuns"></ot-build-promotion-runs>
                </td>
                <td>
                <span ng-repeat="validationStampRunView in buildView.validationStampRunViews"
                      ng-if="validationStampRunView.passed">
                    <ot-entity-image entity="validationStampRunView.validationStamp"></ot-entity-image>
                </span>
                </td>
                <td>
                    <span class="fa fa-minus ot-command"
                          ng-click="unselectBuild(buildView)"
                          title="Unselect this build."></span>
                </td>
            </tr>
            </tbody>
            <!-- Results -->
            <tbody ng-show="buildViews">
            <tr ng-repeat="buildView in buildViews" class="ot-build-search-build">
                <td>
                    <a href="#/branch/{{buildView.build.branch.id}}">{{buildView.build.branch.name}}</a>
                </td>
                <td>
                    <a href="#/build/{{buildView.build.id}}">{{buildView.build.name}}</a>
                </td>
                <td>
                    <ot-build-promotion-runs promotion-runs="buildView.promotionRuns"></ot-build-promotion-runs>
                </td>
                <td>
                <span ng-repeat="validationStampRunView in buildView.validationStampRunViews"
                      ng-if="validationStampRunView.passed">
                    <ot-entity-image entity="validationStampRunView.validationStamp"></ot-entity-image>
                </span>
                </td>
                <td>
                    <span class="fa fa-plus ot-command"
                          ng-click="selectBuild(buildView)"
                          title="Select this build."></span>
                </td>
            </tr>
            </tbody>
        </table>
    </form>

</ot-view>