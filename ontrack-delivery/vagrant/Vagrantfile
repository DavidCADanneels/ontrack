Vagrant.configure('2') do |config|
  config.vm.box = "hashicorp/precise64"
  # config.vm.forward_port 8080, 3000

  # Configurable VM name
  config.vm.hostname = ENV['VAGRANT_HOST']

  # Digital Ocean provider
  config.vm.provider "digital_ocean" do |provider, override|
    override.ssh.private_key_path = '~/.ssh/id_rsa'
    override.vm.box = 'digital_ocean'
    override.vm.box_url = "https://github.com/smdahlen/vagrant-digitalocean/raw/master/box/digital_ocean.box"
    provider.token = ENV['DO_TOKEN']
    provider.image = ENV['DO_IMAGE']
    provider.region = ENV['DO_REGION']
    provider.size = ENV['DO_SIZE']
  end

  # Virtual box provider
  config.vm.provider "virtualbox" do |vm|
    vm.name = ENV['VAGRANT_HOST']
  end

  # TODO Upload of ontrack.jar
  # TODO Installation of ontrack
  # TODO Installation and configuration of nginx

  # TODO Upgrade of ontrack container?

  # config.vm.provision :file do |file|
  #   file.source = 'sources/ontrack.jar'
  #   file.destination = 'ontrack.jar'
  # end

end